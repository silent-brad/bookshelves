<div class="p-4 md:p-6 max-w-screen-lg mx-auto">
  <article class="card">
    <header>
      <h2>Settings</h2>
    </header>
    <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card p-4 bg-muted">
        <h3 class="mb-2">Edit Profile</h3>
        <form class="form grid gap-4" (submit)="saveChanges()">
          <div class="grid gap-2">
            <label for="name">Name</label>
            <input
              id="name"
              type="text"
              [(ngModel)]="updatedName"
              name="name"
              placeholder="Name"
            />
          </div>
          <div class="grid gap-2">
            <label for="description">Description</label>
            <textarea
              id="description"
              [(ngModel)]="updatedDescription"
              name="description"
              placeholder="Description"
            ></textarea>
          </div>
          <button type="submit" class="btn">Save Changes</button>
        </form>
      </div>
      <div class="card p-4 bg-muted">
        <h3 class="mb-2">Change Password</h3>
        <form class="form grid gap-4" (submit)="changePassword()">
          <div class="grid gap-2">
            <label for="oldPassword">Old Password</label>
            <input
              id="oldPassword"
              type="password"
              [(ngModel)]="oldPassword"
              name="oldPassword"
              placeholder="Old Password"
            />
          </div>
          <div class="grid gap-2">
            <label for="newPassword">New Password</label>
            <input
              id="newPassword"
              type="password"
              [(ngModel)]="newPassword"
              name="newPassword"
              placeholder="New Password"
            />
          </div>
          <div class="grid gap-2">
            <label for="confirmPassword">Confirm New Password</label>
            <input
              id="confirmPassword"
              type="password"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              placeholder="Confirm New Password"
            />
          </div>
          <button type="submit" class="btn">Change Password</button>
        </form>
      </div>
      <div class="card p-4 bg-muted">
        <h3 class="mb-2">Upload Avatar</h3>
        <div class="mb-4">
          <input
            type="file"
            (change)="onFileSelected($event)"
            accept="image/*"
            class="mb-2"
          />
          <button
            (click)="uploadAvatar()"
            class="btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full"
            [disabled]="!selectedFile"
          >
            Upload Avatar
          </button>
        </div>
      </div>
      <div class="card p-4 bg-muted">
        <h3 class="mb-2">Delete Account</h3>
        <p class="text-red-500">Warning: This action is irreversible and will delete all your data.</p>
        <button (click)="openDeleteModal()" class="btn bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-full">Delete Account</button>
      </div>
    </section>
    <footer class="mt-6">
      <button (click)="goBack()" class="btn-outline">Back to Profile</button>
    </footer>
  </article>

  <dialog id="delete-account" #deleteModal class="dialog" aria-labelledby="delete-title" aria-describedby="delete-description">
    <article>
      <header>
        <h2 id="delete-title">Confirm Delete Account</h2>
        <p id="delete-description">Are you sure you want to delete your account? This action cannot be undone and will delete all your data.</p>
      </header>
      <footer class="grid gap-2 md:flex md:float-end">
        <button type="button" class="btn-outline" (click)="closeDeleteModal()">Cancel</button>
        <button type="button" class="btn bg-red-500 hover:bg-red-700 text-white" (click)="confirmDelete()">Delete</button>
      </footer>

      <button type="button" aria-label="Close dialog" (click)="closeDeleteModal()" class="cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x">
          <path d="M18 6 6 18" />
          <path d="m6 6 12 12" />
        </svg>
      </button>
    </article>
  </dialog>
</div>
