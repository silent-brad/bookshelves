(() => {
  let t;
  const e = new WeakMap();
  let n = !1;
  const o = {
    success:
      '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>',
    error:
      '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>',
    info: '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>',
    warning:
      '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>',
  };
  function i(t) {
    if (t.dataset.toastInitialized) return;
    const o = parseInt(t.dataset.duration),
      i = -1 !== o ? o || ("error" === t.dataset.category ? 5e3 : 3e3) : -1,
      a = { remainingTime: i, timeoutId: null, startTime: null };
    (-1 !== i &&
      (n
        ? (a.timeoutId = null)
        : ((a.startTime = Date.now()),
          (a.timeoutId = setTimeout(() => s(t), i)))),
      e.set(t, a),
      (t.dataset.toastInitialized = "true"));
  }
  function a() {
    n ||
      ((n = !0),
      t.querySelectorAll('.toast:not([aria-hidden="true"])').forEach((t) => {
        if (!e.has(t)) return;
        const n = e.get(t);
        n.timeoutId &&
          (clearTimeout(n.timeoutId),
          (n.timeoutId = null),
          (n.remainingTime -= Date.now() - n.startTime));
      }));
  }
  function r() {
    n &&
      ((n = !1),
      t.querySelectorAll('.toast:not([aria-hidden="true"])').forEach((t) => {
        if (!e.has(t)) return;
        const n = e.get(t);
        -1 === n.remainingTime ||
          n.timeoutId ||
          (n.remainingTime > 0
            ? ((n.startTime = Date.now()),
              (n.timeoutId = setTimeout(() => s(t), n.remainingTime)))
            : s(t));
      }));
  }
  function s(t) {
    if (!e.has(t)) return;
    const n = e.get(t);
    (clearTimeout(n.timeoutId),
      e.delete(t),
      t.contains(document.activeElement) && document.activeElement.blur(),
      t.setAttribute("aria-hidden", "true"),
      t.addEventListener("transitionend", () => t.remove(), { once: !0 }));
  }
  (document.addEventListener("basecoat:toast", (e) => {
    if (!t)
      return void console.error(
        "Cannot create toast: toaster container not found on page.",
      );
    const n = (function (t) {
      const {
          category: e = "info",
          title: n,
          description: i,
          action: a,
          cancel: r,
          duration: s,
          icon: d,
        } = t,
        c = d || (e && o[e]) || "",
        l = n ? `<h2>${n}</h2>` : "",
        u = i ? `<p>${i}</p>` : "",
        h = a?.href
          ? `<a href="${a.href}" class="btn" data-toast-action>${a.label}</a>`
          : a?.onclick
            ? `<button type="button" class="btn" data-toast-action onclick="${a.onclick}">${a.label}</button>`
            : "",
        m = r
          ? `<button type="button" class="btn-outline h-6 text-xs px-2.5 rounded-sm" data-toast-cancel onclick="${r?.onclick}">${r.label}</button>`
          : "",
        w = `\n      <div\n        class="toast"\n        role="${"error" === e ? "alert" : "status"}"\n        aria-atomic="true"\n        ${e ? `data-category="${e}"` : ""}\n        ${void 0 !== s ? `data-duration="${s}"` : ""}\n      >\n        <div class="toast-content">\n          ${c}\n          <section>\n            ${l}\n            ${u}\n          </section>\n          ${h || m ? `<footer>${h}${m}</footer>` : ""}\n          </div>\n        </div>\n      </div>\n    `,
        g = document.createElement("template");
      return ((g.innerHTML = w.trim()), g.content.firstChild);
    })(e.detail?.config || {});
    t.appendChild(n);
  }),
    window.basecoat &&
      (window.basecoat.register(
        "toaster",
        "#toaster:not([data-toaster-initialized])",
        function (e) {
          e.dataset.toasterInitialized ||
            ((t = e),
            t.addEventListener("mouseenter", a),
            t.addEventListener("mouseleave", r),
            t.addEventListener("click", (t) => {
              const e = t.target.closest(".toast footer a"),
                n = t.target.closest(".toast footer button");
              (e || n) && s(t.target.closest(".toast"));
            }),
            t
              .querySelectorAll(".toast:not([data-toast-initialized])")
              .forEach(i),
            (t.dataset.toasterInitialized = "true"),
            t.dispatchEvent(new CustomEvent("basecoat:initialized")));
        },
      ),
      window.basecoat.register(
        "toast",
        ".toast:not([data-toast-initialized])",
        i,
      )));
})();
